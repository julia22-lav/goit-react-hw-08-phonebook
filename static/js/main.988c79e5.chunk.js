(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{101:function(t,e,n){"use strict";n.r(e);var c,a,r,s,u,o,i=n(0),b=n.n(i),l=n(21),j=n.n(l),d=(n(67),n(39)),O=n(40),h=n(42),f=n(41),p=(n(68),n(7)),g=n(24),v=n.n(g),x=n(16),m=n(2),C=function(){return Object(m.jsxs)("ul",{className:v.a.SideNav,children:[Object(m.jsx)("li",{className:v.a.SideNavLink,children:Object(m.jsx)(x.b,{to:"/",exact:!0,className:v.a.NavLink,activeClassName:v.a.NavLinkActive,children:"Home"})}),Object(m.jsx)("li",{className:v.a.SideNavLink,children:Object(m.jsx)(x.b,{to:"/contacts",exact:!0,className:v.a.NavLink,activeClassName:v.a.NavLinkActive,children:"Contacts"})})]})},k=n(25),N=n.n(k),S=function(){return Object(m.jsxs)("ul",{className:N.a.AuthNav,children:[Object(m.jsx)("li",{className:N.a.AuthNavLink,children:Object(m.jsx)(x.b,{to:"/register",exact:!0,className:N.a.NavLink,activeClassName:N.a.NavLinkActive,children:"Registration"})}),Object(m.jsx)("li",{className:N.a.AuthNavLink,children:Object(m.jsx)(x.b,{to:"/login",className:N.a.NavLink,activeClassName:N.a.NavLinkActive,children:"Login"})})]})},A=n(14),_=function(t){return t.auth.isAuthenticated},L=function(t){return t.auth.user.name},y=n(29),E=n.p+"static/media/profile_pic.3f71ad80.png",R=n(38),q=n.n(R),U=n(43),w={onLogout:y.a.logout},B=Object(A.b)((function(t){return{name:L(t),avatar:E}}),w)((function(t){var e=t.avatar,n=t.name,c=t.onLogout;return Object(m.jsxs)("div",{style:{marginLeft:"auto",width:"auto"},children:[Object(m.jsx)("img",{className:q.a.Avatar,src:e,alt:"",width:"32"}),Object(m.jsxs)("span",{children:["Welcome, ",n]}),Object(m.jsx)(U.a,{className:q.a.Button,variant:"light",type:"button",onClick:c,children:"Logout"})]})})),z=n(58),J=n.n(z),M=n(62),D=Object(A.b)((function(t){return{isAuthenticated:_(t)}}))((function(t){var e=t.isAuthenticated;return Object(m.jsxs)(M.a,{bg:"info",variant:"dark",className:J.a.AppBar,children:[Object(m.jsx)(C,{}),e?Object(m.jsx)(B,{}):Object(m.jsx)(S,{})]})})),F=n(20),G=n(32),H=Object(A.b)((function(t){return{isAuthenticated:_(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=Object(G.a)(t,["component","isAuthenticated"]);return Object(m.jsx)(p.b,Object(F.a)(Object(F.a)({},c),{},{render:function(t){return n?Object(m.jsx)(e,Object(F.a)({},t)):Object(m.jsx)(p.a,{to:"/login"})}}))})),I=Object(A.b)((function(t){return{isAuthenticated:_(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=Object(G.a)(t,["component","isAuthenticated"]);return Object(m.jsx)(p.b,Object(F.a)(Object(F.a)({},c),{},{render:function(t){return n&&c.restricted?Object(m.jsx)(p.a,{to:"/contacts"}):Object(m.jsx)(e,Object(F.a)({},t))}}))})),K=(n(97),Object(i.lazy)((function(){return n.e(7).then(n.bind(null,124))}))),P=Object(i.lazy)((function(){return n.e(4).then(n.bind(null,125))})),T=Object(i.lazy)((function(){return n.e(5).then(n.bind(null,126))})),V=Object(i.lazy)((function(){return Promise.all([n.e(6),n.e(3)]).then(n.bind(null,123))})),W=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(D,{}),Object(m.jsx)(i.Suspense,{fallback:Object(m.jsx)("p",{children:"Loading..."}),children:Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{exact:!0,path:"/",component:K}),Object(m.jsx)(I,{exact:!0,path:"/register",restricted:!0,component:T}),Object(m.jsx)(I,{exact:!0,path:"/login",restricted:!0,component:P}),Object(m.jsx)(H,{exact:!0,path:"/contacts",component:V}),Object(m.jsx)(p.b,{component:K})]})})]})}}]),n}(i.Component),Q={onGetCurrentUser:y.a.getCurrentUser},X=Object(A.b)(null,Q)(W),Y=(n(98),n(31)),Z=n(8),$=n(6),tt=n(4),et=n(17),nt=et.a.addContactRequest,ct=et.a.addContactSuccess,at=et.a.addContactError,rt=et.a.deleteContactRequest,st=et.a.deleteContactSuccess,ut=et.a.deleteContactError,ot=(et.a.fetchContactsRequest,et.a.fetchContactsSuccess),it=(et.a.fetchContactsError,Object(tt.c)([],(c={},Object($.a)(c,ot,(function(t,e){return e.payload})),Object($.a)(c,ct,(function(t,e){var n=e.payload;return t.find((function(t){return t.name===n.name}))?(alert("".concat(n.name," is already in contacts.")),t):[].concat(Object(Y.a)(t),[n])})),Object($.a)(c,st,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),c))),bt=Object(tt.c)("",{"contacts/FilterChange":function(t,e){return e.payload}}),lt=Object(tt.c)(!1,(a={},Object($.a)(a,nt,(function(){return!0})),Object($.a)(a,ct,(function(){return!1})),Object($.a)(a,at,(function(){return!1})),Object($.a)(a,rt,(function(){return!0})),Object($.a)(a,st,(function(){return!1})),Object($.a)(a,ut,(function(){return!1})),a)),jt=Object(Z.b)({items:it,filter:bt,loading:lt}),dt=n(59),Ot=n.n(dt),ht=n(19),ft=n(60),pt=n.n(ft),gt=n(5),vt={name:null,email:null},xt=Object(tt.c)(vt,(r={},Object($.a)(r,gt.a.registerSuccess,(function(t,e){return e.payload.user})),Object($.a)(r,gt.a.loginSuccess,(function(t,e){return e.payload.user})),Object($.a)(r,gt.a.logoutSuccess,(function(t,e){return vt})),Object($.a)(r,gt.a.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),mt=Object(tt.c)(!1,(s={},Object($.a)(s,gt.a.registerSuccess,(function(){return!0})),Object($.a)(s,gt.a.loginSuccess,(function(){return!0})),Object($.a)(s,gt.a.getCurrentUserSuccess,(function(){return!0})),Object($.a)(s,gt.a.registerError,(function(){return!1})),Object($.a)(s,gt.a.loginError,(function(){return!1})),Object($.a)(s,gt.a.getCurrentUserError,(function(){return!1})),Object($.a)(s,gt.a.logoutSuccess,(function(){return!1})),s)),Ct=Object(tt.c)(null,(u={},Object($.a)(u,gt.a.registerSuccess,(function(t,e){return e.payload.token})),Object($.a)(u,gt.a.loginSuccess,(function(t,e){return e.payload.token})),Object($.a)(u,gt.a.logoutSuccess,(function(t,e){return null})),u)),kt=Object(tt.c)(null,(o={},Object($.a)(o,gt.a.registerError,(function(t,e){return e.payload})),Object($.a)(o,gt.a.loginError,(function(t,e){return e.payload})),Object($.a)(o,gt.a.logoutError,(function(t,e){return e.payload})),Object($.a)(o,gt.a.getCurrentUserError,(function(t,e){return e.payload})),o)),Nt=Object(Z.b)({user:xt,isAuthenticated:mt,token:Ct,error:kt}),St={key:"auth",storage:pt.a,whitelist:["token"]},At=Object(Z.b)({contacts:jt,auth:Object(ht.g)(St,Nt)}),_t=[].concat(Object(Y.a)(Object(tt.d)({serializableCheck:{ignoredActions:[ht.a,ht.f,ht.b,ht.c,ht.d,ht.e]}})),[Ot.a]),Lt=Object(tt.a)({reducer:At,middleware:_t,devTools:!1}),yt={store:Lt,persistor:Object(ht.h)(Lt)},Et=n(61);j.a.render(Object(m.jsx)(b.a.StrictMode,{children:Object(m.jsx)(x.a,{children:Object(m.jsx)(A.a,{store:yt.store,children:Object(m.jsx)(Et.a,{loading:null,persistor:yt.persistor,children:Object(m.jsx)(X,{})})})})}),document.getElementById("root"))},17:function(t,e,n){"use strict";var c=n(4),a=Object(c.b)("contacts/fetchContactsRequest"),r=Object(c.b)("contacts/fetchContactsSuccess"),s=Object(c.b)("contacts/fetchContactsError"),u=Object(c.b)("contacts/addContactRequest"),o=Object(c.b)("contacts/addContactSuccess"),i=Object(c.b)("contacts/addContactError"),b=Object(c.b)("contacts/deleteContactRequest"),l=Object(c.b)("contacts/deleteContactSuccess"),j=Object(c.b)("contacts/deleteContactError"),d=Object(c.b)("contacts/FilterChange");e.a={addContactRequest:u,addContactSuccess:o,addContactError:i,deleteContactRequest:b,deleteContactSuccess:l,deleteContactError:j,filterChange:d,fetchContactsRequest:a,fetchContactsSuccess:r,fetchContactsError:s}},24:function(t,e,n){t.exports={SideNav:"SideNav_SideNav__26JGD",SideNavLink:"SideNav_SideNavLink__laBKs",NavLink:"SideNav_NavLink__1Vsp8",NavLinkActive:"SideNav_NavLinkActive__3usCv"}},25:function(t,e,n){t.exports={AuthNav:"AuthNav_AuthNav__UqbkM",AuthNavLink:"AuthNav_AuthNavLink__JSvee",NavLink:"AuthNav_NavLink__1lifd",NavLinkActive:"AuthNav_NavLinkActive__1kvB_"}},29:function(t,e,n){"use strict";var c=n(18),a=n.n(c),r=n(28),s=n(22),u=n.n(s),o=n(5);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){u.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(){var e=Object(r.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(o.a.registerRequest()),e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:c=e.sent,i(c.data.token),n(o.a.registerSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(o.a.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},login:function(t){return function(){var e=Object(r.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(o.a.loginRequest()),e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:c=e.sent,i(c.data.token),n(o.a.loginSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(o.a.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logout:function(){return function(){var t=Object(r.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(o.a.logoutRequest()),t.prev=1,t.next=4,u.a.post("/users/logout");case 4:e(o.a.logoutSuccess()),b(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(o.a.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(r.a)(a.a.mark((function t(e,n){var c,r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n(),r=c.auth.token){t.next=3;break}return t.abrupt("return");case 3:return i(r),e(o.a.getCurrentUserRequest()),t.prev=5,t.next=8,u.a.get("/users/current");case 8:s=t.sent,e(o.a.getCurrentUserSuccess(s.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(o.a.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}}},38:function(t,e,n){t.exports={Button:"UserMenu_Button__FCJiD",Avatar:"UserMenu_Avatar__mx0Dk"}},5:function(t,e,n){"use strict";var c=n(4),a=Object(c.b)("auth/registerRequest"),r=Object(c.b)("auth/registerSuccess"),s=Object(c.b)("auth/registerError"),u=Object(c.b)("auth/loginRequest"),o=Object(c.b)("auth/loginSuccess"),i=Object(c.b)("auth/loginError"),b=Object(c.b)("auth/logoutRequest"),l=Object(c.b)("auth/logoutSuccess"),j=Object(c.b)("auth/logoutError"),d=Object(c.b)("auth/getCurrentUserRequest"),O=Object(c.b)("auth/getCurrentUserSuccess"),h=Object(c.b)("auth/getCurrentUserError");e.a={registerRequest:a,registerSuccess:r,registerError:s,loginRequest:u,loginSuccess:o,loginError:i,logoutRequest:b,logoutSuccess:l,logoutError:j,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:h}},58:function(t,e,n){t.exports={AppBar:"AppBar_AppBar__LJpi9"}},67:function(t,e,n){},68:function(t,e,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.988c79e5.chunk.js.map